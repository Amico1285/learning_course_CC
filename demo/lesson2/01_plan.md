# Второй урок

## Структура (90 минут)

1. **Демо** -- 30 минут
2. **Практика** -- 40 минут
3. **Дискуссия** -- 20 минут

---

## 1. Демо (30 минут)

### 1.1. Обзор команд (15 минут)

Урок 1 дал основы: контекстное окно, промптинг, Plan/Act Mode, CLAUDE.md. Теперь -- инструменты для ежедневной работы.

**Агенты и субагенты**

- Основные агенты: Build (выполняет задачи) и Plan (только анализ, без изменений)
- Субагенты: general, explore, web-research -- делегирование подзадач без загрязнения основного контекста
- Кастомные агенты: можно создать собственного агента с определенной моделью, набором инструментов и инструкциями (подробнее в практике)

**Управление контекстом**

- `/compact` -- сжимает беседу до ~10% контекстного окна. Качество снижается, но позволяет продолжать долгие сессии. Вспоминаем деградацию из урока 1: лучше начать новую беседу, чем жить с раздутым контекстом
- `/fork` -- развилка беседы. Агент уже изучил проект -- форкните и решайте разные задачи с чистого контекста, не тратя время и токены на повторное изучение

**Настройка проекта**

- `/init` -- агент изучает проект и создает CLAUDE.md (Claude Code) / AGENTS.md (OpenCode). Это файл, из которого агент черпает начальные знания о проекте. Ошибка в нем сильно влияет на производительность. Держите его коротким, актуальным, без противоречий
- `/mcp` -- Model Context Protocol. Как USB для моделей: подключение внешних сервисов (таск-трекер, API проекта, Google Docs). Не злоупотреблять -- каждый MCP-сервер добавляет инструменты в контекст модели, включать только то, что используется в текущей сессии

**Различия Claude Code и OpenCode**

| Возможность | Claude Code | OpenCode |
|-------------|------------|----------|
| Выбор модели | `/model` -- только Claude (Opus, Sonnet, Haiku) | `/models` -- 75+ провайдеров (Claude, GPT, Gemini, локальные через Ollama) |
| Подключение провайдеров | Не нужно -- работает только с Anthropic | `/connect` -- добавление API-ключей разных провайдеров |
| Стоимость инструмента | $20-200/мес подписка или API | Бесплатный, платите только за API выбранного провайдера |
| Кастомные агенты | `.claude/agents/` | `opencode.json` или `.opencode/agents/` |

Главное преимущество OpenCode: можно подбирать модель под задачу. Дешевая модель для простых задач, мощная -- для сложных.

**Полезные мелочи**

- `/copy` -- копирует транскрипт беседы в буфер обмена (удобно для отчетов и шеринга)
- `/editor` -- открывает настроенный текстовый редактор для длинных промптов
- AskQuestion -- инструмент, с помощью которого агент задает вам уточняющие вопросы. Полезен для брейншторма: попросите агента задавать вопросы вместо того, чтобы сразу действовать

### 1.2. Демо-задача: проверка документации (15 минут)

**Задача:** Проверить 20 статей из документации компании на ошибки.

**Ход демо:**

1. Подключить агента к репозиторию с документацией
2. Вместе с агентом определить типы ошибок для проверки:
   - Фактические ошибки (устаревшая информация, неверные инструкции)
   - Терминологические (неконсистентное использование терминов)
   - Структурные (нарушение гайдлайнов оформления)
   - Грамматические и стилистические
   - Битые ссылки, отсутствующие скриншоты
3. Показать как агент анализирует статьи и формирует отчет
4. Показать как корректировать агента в процессе (iterative prompting из урока 1)

---

## 2. Практика (40 минут)

### Задание: создать кастомного агента-ревьюера с другой моделью

Студенты самостоятельно:

1. **Создают кастомного агента** (10 минут)
   - Пишут файл агента с инструкциями для проверки документации
   - Указывают конкретную модель (например, GPT через OpenCode или Haiku через Claude Code)
   - Определяют набор инструментов (чтение файлов, поиск, веб-поиск)

2. **Запускают агента на задаче** (20 минут)
   - Проверяют подмножество статей из документации
   - Экспериментируют с промптами и настройками
   - Сравнивают результаты с тем, что показали в демо

3. **Фиксируют результаты** (10 минут)
   - Какие ошибки нашел агент?
   - Какие пропустил?
   - Как модель повлияла на качество?

---

## 3. Дискуссия (20 минут)

### Q&A + разбор результатов практики

- Какие типы ошибок агент находит хорошо, а какие пропускает?
- Как отличались результаты с разными моделями?
- Где в вашей работе такой подход применим? (ревью документации, проверка консистентности, поиск устаревшей информации)
- Свободные вопросы по инструментам

---

## Заметки

- Документация для проверки будет предоставлена на занятии (внутренняя документация компании)
- Перед уроком убедиться, что у студентов настроен хотя бы один инструмент (CC или OC)
- Связь с уроком 1: iterative prompting, управление контекстом, Plan Mode -- все применяется на практике
