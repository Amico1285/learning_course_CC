# Второй урок

## Структура (90 минут)

1. **Демо** -- 30 минут
2. **Практика** -- 40 минут
3. **Дискуссия** -- 20 минут

---

## 1. Демо (30 минут)

### 1.1. Обзор команд

Урок 1 дал основы: контекстное окно, промптинг, Plan/Act Mode, AGENTS.md. Теперь -- инструменты для ежедневной работы.

**Агенты и субагенты**

- Основные агенты: Build (выполняет задачи) и Plan (только анализ, без изменений)
- Субагенты: general, explore, web-research -- делегирование подзадач без загрязнения основного контекста
- Кастомные агенты: можно создать собственного агента с определенной моделью, набором инструментов и инструкциями (подробнее в практике)

**Управление контекстом**

- `/compact` -- сжимает беседу до ~10% контекстного окна. Качество снижается, но позволяет продолжать долгие сессии. Вспоминаем деградацию из урока 1: лучше начать новую беседу, чем жить с раздутым контекстом
- `/fork` -- развилка беседы. Агент уже изучил проект -- форкните и решайте разные задачи с чистого контекста, не тратя время и токены на повторное изучение

**Настройка проекта**

- `/init` -- агент изучает проект и создает AGENTS.md. Это файл, из которого агент черпает начальные знания о проекте. Ошибка в нем сильно влияет на производительность. Держите его коротким, актуальным, без противоречий
- `/mcp` -- Model Context Protocol. Как USB для моделей: подключение внешних сервисов (таск-трекер, API проекта, Google Docs). Не злоупотреблять -- каждый MCP-сервер добавляет инструменты в контекст модели, включать только то, что используется в текущей сессии

**Полезные мелочи**

- Question -- инструмент, с помощью которого агент задает вам уточняющие вопросы. Полезен для брейншторма: попросите агента задавать вопросы вместо того, чтобы сразу действовать

### 1.2. Демо-задача: проверка документации на ошибки

Полный цикл работы с агентом -- от открытия папки с документацией до коммита исправлений.

1. Запуск OpenCode в папке с документацией, инициализация проекта через `/init` (см. выше)
2. Попытка открыть документацию в браузере -- агент не может, нет нужного инструмента
3. Поиск и установка MCP-сервера Playwright для управления браузером (см. `/mcp` выше). Перезаход в OpenCode с флагом `-c` для продолжения беседы с подключенным сервером
4. Повторное открытие документации -- агент видит ошибку, исправляет, проверяет результат в браузере. Feedback loop: действие -> результат -> корректировка
5. Инициализация локального Git -- откат изменений, чистые диффы, контрольные точки
6. Переход в Plan Mode (см. агенты выше) для задачи: проверить орфографию в 20 статьях. Построение плана с параллельной обработкой через субагентов (см. выше), каждый из которых возвращает отчет в установленном формате
7. Запуск плана -- субагенты параллельно проверяют статьи, формируется сводный отчет
8. Исправление найденных ошибок основным агентом. Ручной просмотр диффов перед коммитом -- только после проверки делается коммит

---

## 2. Практика (40 минут)

В демо мы проверяли орфографию. Но в документации бывают и другие типы ошибок.

**Задание:** побрейнштормить с моделью, какие еще типы ошибок могут быть. Построить план и исправить неорфографические ошибки в тех же 20 файлах.

**Задание со звездочкой:** решить эту задачу с помощью кастомного субагента с другой моделью.

---

## 3. Дискуссия (20 минут)

### Q&A + разбор результатов практики

- Что было легко сделать?
- Где возникли сложности?
- Где модель удивила?
- Какие идеи возникли?
- Где в вашей работе можно было бы использовать подобный agentic AI?

---

## Заметки

- Документация для проверки будет предоставлена на занятии (внутренняя документация компании)
- Перед уроком убедиться, что у студентов настроен хотя бы один инструмент (CC или OC)
- Связь с уроком 1: iterative prompting, управление контекстом, Plan Mode -- все применяется на практике
